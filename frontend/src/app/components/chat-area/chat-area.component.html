@if(chatService.selectedUser()) {
<div class="h-full flex flex-col border-l border-slate-700/95">
  <!-- top bar -->
  <div class="bg-primary py-2 px-4 flex items-center gap-4">
    <img
      src="default.jpg"
      alt="profile picture"
      class="w-[40px] h-[40px] object-cover rounded-full"
    />
    <h3 class="font-bold text-white">
      {{ chatService.selectedUser()?.username | titlecase }}
    </h3>
  </div>
  <!-- end top bar -->
  <div class="background-img relative flex-1">
    <!-- message area -->
    <div
      class="absolute bg-secondary/95 h-full w-full no-scrollbar overflow-y-scroll"
      #chatArea
    >
      <div class="flex-1 py-5 px-20 text-white">
        @if(chatService.selectedUserMessages().length > 0) { @for(message of
        chatService.selectedUserMessages(); track message._id){
        <div
          class="relative w-max rounded-md p-2 pr-12 text-sm mb-2 max-w-[70%]
          {{
            authService.loggedInUser()?._id === message.senderId
              ? 'bg-tertiary rounded-tr-none text-sm ml-auto'
              : 'bg-primary rounded-md rounded-tl-none'
          }}"
        >
          <p>{{ message.message }}</p>
          <small class="absolute right-2 bottom-0 text-[hsla(0,0%,100%,0.6)]"
            >{{ message.createdAt | date : "HH:MM" }}
          </small>
        </div>
        } }
      </div>
      <!-- end message area -->
    </div>
  </div>
  <!-- bottom bar -->
  <div class="bg-primary py-2 px-4 flex items-center gap-4">
    <input
      type="text"
      placeholder="Type a message"
      class="outline-none text-white bg-input py-2 px-5 rounded flex-1"
      [(ngModel)]="messageInput"
    />
    <div class="cursor-pointer" (click)="onSendMessage()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-send text-gray-400"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M10 14l11 -11" />
        <path
          d="M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"
        />
      </svg>
    </div>
  </div>

  <!-- end bottom bar -->
</div>

}
